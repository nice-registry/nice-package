# nice-package âœ¨ðŸ“¦âœ¨

> Clean up messy package metadata from the npm registry

The [package data served by the npm registry](http://registry.npmjs.com/express)
is messy and confusing. The folks at npm, Inc maintain a tool called
[normalize-registry-metadata](https://github.com/npm/normalize-package-data)
which does a lot of work to clean this data up, but the resulting object is
still kind of inhumane.

`nice-package` uses `normalize-package-data` as a baseline, then does even more
package cleanup:

- uses the `doc['dist-tags'].latest` as the baseline for package metadata
- turns `users` object into a star count
- turns the `time` object into an array of version data
- renames `_npmUser` to `lastPublisher`
- renames `maintainers` to `owners`
- parses GitHUB repository URLs into [useful objects](https://github.com/zeke/github-url-to-object#readme)
- removes internal bookkeeping properties like `_id` and `_from`
- [more...](tests/index.js)

See also [package-stream](https://github.com/zeke/package-stream/), a
tool that streams nice packages from the npm registry.

## Installation

```sh
npm install nice-package --save
```

## Usage

`nice-package` exports a class. To create a new package instance,
call `new Package(doc)`, where `doc` is a JSON package object from the npm registry:

```js
const package = require('nice-package')

package('express')
  .then(function(doc) {
    var pkg = new Package(doc)
    console.log(JSON.stringify(pkg, null, 2))
  })
```

### Convenience Methods

A nice package comes with convenience methods:

#### `pkg.mentions(query)`

* `query` String

Performs a case-insensitive search against the JSON-stringified object. Returns
a Boolean indicating whether the given query is present in the object.

#### `pkg.dependsOn(pkgName)`

* `pkgName` String - The name of another package

Returns a Boolean indicating whether the given `pkgName` is listed in `dependencies`.

#### `pkg.devDependsOn(pkgName)`

* `pkgName` String - The name of another package

Returns a Boolean indicating whether the given `pkgName` is listed in `devDependencies`.

#### `pkg.depNames`

A getter method that returns an array of the `dependencies` keys.

#### `pkg.devDepNames`

A getter method that returns an array of the `devDependencies` keys.

## Validation

`nice-package` uses a [JSON schema](lib/schema.js) to validate packages.

The following properties are required:

- `name` String
- `description` String
- `version` String

To determine if a package is valid, use the `pkg.valid` getter method:

```js
pkg.valid
// => false
```

To see validation errors on a package, use the `pkg.validationErrors` getter method:

```js
pkg.validationErrors
```

The result is an array of
[revalidator errors](https://github.com/flatiron/revalidator#example).

## Tests

```sh
npm install
npm test
```

## Dependencies

- [github-url-to-object](https://github.com/zeke/github-url-to-object): Extract user, repo, and other interesting properties from GitHub URLs
- [normalize-registry-metadata](https://github.com/npm/normalize-registry-metadata): clean package metadata objects you get from registry changes feeds
- [revalidator](https://github.com/flatiron/revalidator): A cross-browser / node.js validator powered by JSON Schema
- [semver](https://github.com/npm/node-semver): The semantic version parser used by npm.

## Dev Dependencies

- [require-dir](https://github.com/aseemk/requireDir): Helper to require() directories.
- [standard](https://github.com/feross/standard): JavaScript Standard Style
- [tap-spec](https://github.com/scottcorgan/tap-spec): Formatted TAP output like Mocha&#39;s spec reporter
- [tape](https://github.com/substack/tape): tap-producing test harness for node and browsers

## License

MIT

## Credits

ðŸ’› Thanks to [emilyrose](https://github.com/emilyrose) for giving up
the `nice-package` name on npm.

_Generated by [package-json-to-readme](https://github.com/zeke/package-json-to-readme)_
